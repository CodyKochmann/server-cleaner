(function(){var t,e,n,o,i,r,a,l,p,h,s,y,c,f,g,m,d,u,v,b,x,w,T,N,k,E,M,H=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};for(e=[],t=document.getElementsByTagName("a"),l=0,s=t.length;s>l;l++)a=t[l],void 0!==a.innerText&&void 0!==a.href&&e.push({href:a.href,text:a.innerText});for(console.log(JSON.stringify(e)),E=[{type:"directory",types:""},{type:"video",types:"mp4 avi mkv flv"},{type:"photo",types:"png jpeg jpg webm PNG JPEG JPG WEBM"},{type:"audio",types:"m4a mp3 aiff"},{type:"source_code",types:"py bookmarklet coffee js py rb coffee txt rtf"},{type:"database",types:"sqlite db"},{type:"archive",types:"7z zip jar tar gzip bz"},{type:"log",types:"md out log"},{type:"other",types:""}],p=0,y=e.length;y>p;p++){for(a=e[p],"/"===a.text.split("").pop()&&(a.type="directory"),h=0,c=E.length;c>h;h++)k=E[h],w=a.text.split(".").pop(),H.call(k.types.split(" "),w)>=0&&(a.type=k.type);void 0===a.type&&(a.type="other")}for(i=function(t){var e,n;return n=document.createElement("a"),n.innerText=t.text,n.className=t.type,n.href=t.href,e="<style>a{\n  margin: 6px;\n  position: relative;\n  float: left;\n  text-decoration: none;\n  color: white;\n  padding: 0.08in;\n  font-family: 'Avenir Next';\n  width:auto;\n  background: rgba(100,100,100,0.8);\n  text-align: center;\n}\na:hover, a:active{\n  background: blue;\n}</style>",e+n.outerHTML},r=function(t){var e,n;return n=document.createElement("img"),n.className=t.type,n.src=t.href,n.href=t.href,e="<style>.photo{\n  margin: 6px;\n  position: relative;\n  height:2in;\n  float: left;\n  width:auto;\n}\n.photo:hover, .photo:active{\n  opacity:0.6;\n}</style>",e+n.outerHTML},u=0,f=e.length;f>u;u++)a=e[u],console.log(i(a)),a.html=i(a),"photo"===a.type&&(a.html=r(a));for(document.write("<html><body style='width:100%;height:auto;background:rgba(20,20,20,0.9);margin:0;'>"),v=0,g=E.length;g>v;v++){for(a=E[v],o=!1,n=document.createElement("div"),n.className=a.type+"_container",N=n.style,N.position="relative",N.height="auto",N.width="80%",N.margin="0.1in 10%",N["float"]="left",n.innerHTML="<p style='height:0.25in;width:100%;margin:0.05in 0;border-bottom:solid 1px white;color:white;font-family:arial;'>"+a.type+"</p>",b=0,m=e.length;m>b;b++)M=e[b],M.type===a.type&&(o=!0,n.innerHTML+=M.html);o&&document.write(n.outerHTML)}for(document.write("</body></html>"),T=document.getElementsByTagName("img"),x=0,d=T.length;d>x;x++)a=T[x],a.ondblclick=function(){return console.log("opening "+this.src),location.href=this.src}}).call(this);