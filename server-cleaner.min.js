(function(){var t,e,n,o,i,r,a,l,p,h,y,s,c,f,g,d,m,u,v,b,x,T,w,M,N,k,E,H,L=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};for(n=[],t=document.getElementsByTagName("a"),p=0,s=t.length;s>p;p++)l=t[p],void 0!==l.innerText&&void 0!==l.href&&n.push({href:l.href,text:l.innerText});for(console.log(JSON.stringify(n)),E=[{type:"directory",types:""},{type:"video",types:"mp4 avi mkv flv"},{type:"photo",types:"png jpeg jpg webm PNG JPEG JPG WEBM"},{type:"audio",types:"m4a mp3 aiff"},{type:"source_code",types:"py bookmarklet coffee js py rb coffee txt rtf"},{type:"database",types:"sqlite db"},{type:"archive",types:"7z zip jar tar gzip bz"},{type:"log",types:"md out log"},{type:"other",types:""}],h=0,c=n.length;c>h;h++){for(l=n[h],"/"===l.text.split("").pop()&&(l.type="directory"),y=0,f=E.length;f>y;y++)k=E[y],w=l.text.split(".").pop(),L.call(k.types.split(" "),w)>=0&&(l.type=k.type);void 0===l.type&&(l.type="other")}for(r=function(t){var e,n;return n=document.createElement("a"),n.innerText=t.text,n.className=t.type,n.href=t.href,e="<style>a{\n  margin: 6px;\n  position: relative;\n  float: left;\n  text-decoration: none;\n  color: white;\n  padding: 0.08in;\n  font-family: 'Avenir Next';\n  width:auto;\n  background: rgba(100,100,100,0.8);\n  text-align: center;\n}\na:hover, a:active{\n  background: blue;\n}</style>",e+n.outerHTML},a=function(t){var e,n;return n=document.createElement("img"),n.className=t.type,n.src=t.href,n.href=t.href,e="<style>.photo{\n  margin: 6px;\n  position: relative;\n  height:2in;\n  float: left;\n  width:auto;\n}\n.photo:hover, .photo:active{\n  opacity:0.6;\n}</style>",e+n.outerHTML},v=0,g=n.length;g>v;v++)l=n[v],console.log(r(l)),l.html=r(l),"photo"===l.type&&(l.html=a(l));for(document.body.innerHTML="",e=document.body.style,e.height="auto",e.width="100%",e.background="rgba(20,20,20,0.9)",e.margin=0,b=0,d=E.length;d>b;b++){for(l=E[b],i=!1,o=document.createElement("div"),o.className=l.type+"_container",N=o.style,N.position="relative",N.height="auto",N.width="80%",N.margin="0.1in 10%",N["float"]="left",o.innerHTML="<p style='height:0.25in;width:100%;margin:0.05in 0;border-bottom:solid 1px white;color:white;font-family:arial;'>"+l.type+"</p>",x=0,m=n.length;m>x;x++)H=n[x],H.type===l.type&&(i=!0,o.innerHTML+=H.html);i&&(document.body.innerHTML+=o.outerHTML)}for(M=document.getElementsByTagName("img"),T=0,u=M.length;u>T;T++)l=M[T],l.ondblclick=function(){return console.log("opening "+this.src),location.href=this.src}}).call(this);