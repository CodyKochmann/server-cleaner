(function(){var e,t,n,o,i,r,a,l,p,h,s,y,c,f,d,g,m,u,v,b,x,T,w,M,N,E,H,L,k,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(n=[],e=document.getElementsByTagName("a"),h=0,c=e.length;c>h;h++)p=e[h],void 0!==p.innerText&&void 0!==p.href&&n.push({href:p.href,text:p.innerText});for(console.log(JSON.stringify(n)),L=[{type:"directory",types:""},{type:"video",types:"mp4 avi mkv flv"},{type:"photo",types:"png jpeg jpg webm PNG JPEG JPG WEBM"},{type:"audio",types:"m4a mp3 aiff"},{type:"source_code",types:"py bookmarklet coffee js py rb coffee txt rtf"},{type:"database",types:"sqlite db"},{type:"archive",types:"7z zip jar tar gzip bz"},{type:"log",types:"md out log"},{type:"other",types:""}],s=0,f=n.length;f>s;s++){for(p=n[s],"/"===p.text.split("").pop()&&(p.type="directory"),y=0,d=L.length;d>y;y++)H=L[y],M=p.text.split(".").pop(),j.call(H.types.split(" "),M)>=0&&(p.type=H.type);void 0===p.type&&(p.type="other")}for(r=function(e){var t,n;return n=document.createElement("a"),n.innerText=e.text,n.className=e.type,n.href=e.href,t="<style>a{\n  margin: 6px;\n  position: relative;\n  float: left;\n  text-decoration: none;\n  color: white;\n  padding: 0.08in;\n  font-family: 'Avenir Next';\n  width:auto;\n  background: rgba(100,100,100,0.8);\n  text-align: center;\n}\na:hover, a:active{\n  background: blue;\n}</style>",t+n.outerHTML},a=function(e){var t,n;return n=document.createElement("img"),n.className=e.type,n.src=e.href,n.href=e.href,t="<style>.photo{\n  margin: 6px;\n  position: relative;\n  height:2in;\n  float: left;\n  width:auto;\n}\n.photo:hover, .photo:active{\n  opacity:0.6;\n}</style>",t+n.outerHTML},l=function(e){var t,n;return n=document.createElement("video"),n.className=e.type,n.src=e.href,t="<style>\n  .video{\n    width:10%;\n    margin:6px 0;\n    height:auto;\n    float:left;\n    position:relative;\n  }\n  .video:hover, .video:active{\n    opacity:0.6;\n  }\n</style>",t+n.outerHTML},b=0,g=n.length;g>b;b++)p=n[b],console.log(r(p)),p.html=r(p),"photo"===p.type&&(p.html=a(p)),"video"===p.type&&(p.html=l(p));for(document.body.innerHTML="",t=document.body.style,t.height="auto",t.width="100%",t.background="rgba(20,20,20,0.9)",t.margin=0,x=0,m=L.length;m>x;x++){for(p=L[x],i=!1,o=document.createElement("div"),o.className=p.type+"_container",E=o.style,E.position="relative",E.height="auto",E.width="80%",E.margin="0.1in 10%",E["float"]="left",o.innerHTML="<p style='height:0.25in;width:100%;margin:0.05in 0;border-bottom:solid 1px white;color:white;font-family:arial;'>"+p.type+"</p>",T=0,u=n.length;u>T;T++)k=n[T],k.type===p.type&&(i=!0,o.innerHTML+=k.html);i&&(document.body.innerHTML+=o.outerHTML)}for(N=document.getElementsByTagName("img"),w=0,v=N.length;v>w;w++)p=N[w],p.ondblclick=function(){return console.log("opening "+this.src),location.href=this.src}}).call(this);
